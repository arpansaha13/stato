# Installation

```bash
npm install @stato/vue --save-dev

# with yarn
yarn add @stato/vue --dev

# with pnpm
pnpm add -D @stato/vue
```

# Quick start

Add these scripts to your root `package.json`:

```json
{
  "stato": "stato --open",
  "stato:init": "stato init"
}
```

Now run this command at the root of the project:
```bash
npm run stato:init

# with yarn
yarn stato:init

# with pnpm
pnpm stato:init
```

This will create 3 files:
- stato.config.js
- .stato/index.html
- .stato/script.mjs

This is the autogenerated `stato.config.js` file:

```js
// stato.config.js
module.exports = {
  content: [],
}
```

The autogenerated `.stato/script.mjs` file should look like this:

```mjs
// .stato/script.mjs
import '@stato/vue/context'

// your custom styles here
```

<br>

> Note: Do not remove `import @stato/vue/context` from `.stato/script.mjs`.

<br>

And the autogenerated `.stato/index.html` file should look like this:

```html
<!-- .stato/index.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stato iframe</title>
  </head>
  <body>
    <div id="iframe"></div>
    <script type="module" src="./script.mjs"></script>
  </body>
</html>
```

Now run this command to start the vite dev server for stato.

```bash
npm run stato

# with yarn
yarn stato

# with pnpm
pnpm stato
```

## Config

In the `stato.config.js` file, list the paths or glob patterns to the stories in the `content` property:

```js
// stato.config.js
module.exports = {
  content: ['src/stories/**/*.stories.js'],
}
```

### Typescript

If you are using typescript you may rename the config file to `stato.config.ts`.

`@stato/vue` provides a typescript helper `defineStatoConfig` for the config file. You can use it like this:

```ts
// stato.config.ts
import { defineStatoConfig } from '@stato/vue'

export default defineStatoConfig({
  content: ['src/stories/**/*.stories.ts'],
})
```

### Type declaration for config object

```ts
import { UserConfig } from 'vite'

export interface StatoConfig {
  /**
   * Paths or glob patterns to the stories relative to the project root.
   */
  content: string[]
  /**
   * Vite config options.
   */
  viteOptions?: {
    base: UserConfig['base']
    css: UserConfig['css']
    publicDir: UserConfig['publicDir']
  }
}
```

## Styles

The scoped styles of the components, along with any import styles within the components, will be added automatically. In addition to that, if you want to add a stylesheet for the stories, then you can import them in the `.stato/script.mjs` file.

```mjs
// .stato/script.mjs
import '@stato/vue/context'

// your custom styles here
import '../src/styles/main.css'
```

Stato uses [vite](https://vitejs.dev) for the dev server. So if you want to use css preprocessors like `sass` or `less`, then you can use them in the same way as you would in a vite project. Similarly you can use `PostCSS`. See [here](https://vitejs.dev/guide/features.html#css).

In the config object of the `stato.config.js` file, you can also specify the vite options for `css` as shown below. See the vite options [css.postcss](https://vitejs.dev/config/#css-postcss) and [css.preprocessorOptions](https://vitejs.dev/config/#css-preprocessoroptions).

```ts
// stato.config.ts
import { defineStatoConfig } from '@stato/vue'

export default defineStatoConfig({
  content: ['src/stories/**/*.stories.ts'],
  viteOptions: {
    css: { /* css options */ }
  }
})
```

# Stories

Make a file, say `Button.stories.js`. Lets call it a `book` which will export the stories. `@stato/vue` exports a typescript helper `defineBook` which can wrap the default export.

```js
// Button.stories.js
import { defineBook } from '@stato/vue'
import Button from './Button.vue'

const Template = (props, slot) => ({
  components: { Button },
  setup() {
    return { props, slot }
  },
  template: '<Button v-bind="props">{{ slot }}</Button>',
})

export default defineBook({
  stories: {
    Primary: Template(
      {
        primary: true,
      },
      'Button'
    ),
    Secondary: Template(null, 'Button'),
    Large: Template(
      {
        size: 'large',
      },
      'Button'
    ),
    Small: Template(
      {
        size: 'small',
      },
      'Button'
    ),
  },
})
```
